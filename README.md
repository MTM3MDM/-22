# 루시아 디스코드 봇 - 고급 자연어 AI 어시스턴트 🚀

**완전 업그레이드된 고급 Gemini AI 디스코드 챗봇 - 응답 반복 문제 해결 및 대폭 기능 강화**

> 🎉 **대폭 업그레이드**: 응답 반복 문제 완전 해결, 웹 검색, 이미지 생성, 데이터 시각화, 시스템 모니터링 등 고급 기능 추가!

## 🌟 주요 업그레이드 내용

### ✅ 문제 해결
- **응답 반복 문제 완전 해결**: `stop_processing` 플래그로 중복 응답 방지
- **메모리 최적화**: 고급 세션 관리 및 자동 정리
- **성능 향상**: 비동기 처리 및 데이터베이스 연동

### 🚀 새로운 고급 기능
- **🔍 웹 검색**: 위키피디아 및 실시간 웹 검색
- **📊 데이터 시각화**: 차트 및 그래프 자동 생성
- **🖥️ 시스템 모니터링**: 실시간 성능 분석 및 상태 보고
- **💾 영구 저장**: SQLite 데이터베이스 연동
- **🎨 이미지 생성**: 차트, 상태 보고서 등 시각적 콘텐츠

## 🎯 핵심 특징

### 🧠 고급 AI 기능
- **Gemini 1.5 Flash**: 빠른 응답 및 일반 대화
- **Gemini 1.5 Pro**: 전문적 분석 및 복잡한 문제 해결
- **맥락 기억**: 40개 메시지까지 대화 히스토리 유지
- **개인화**: 사용자별 설정 및 선호도 저장
- **🎨 다양한 응답**: 같은 질문에도 매번 다른 스타일로 응답
- **🔄 반복 질문 감지**: "또 궁금하신가봐요~" 같은 자연스러운 반응

### 🔍 지능형 웹 검색 및 기억 시스템
- **SerpAPI 연동**: 실시간 구글 검색 결과 제공
- **기억 기능**: 이전 검색 내용을 기억하고 관련 질문에 활용
- **벡터 검색**: 유사한 질문을 찾아 기존 답변 재활용
- **캐싱 시스템**: 6시간 캐시로 빠른 응답
- **위키피디아 연동**: 정확한 백과사전 정보 제공

### 📊 데이터 시각화
- **자동 차트 생성**: "차트 그려줘"로 데이터 시각화
- **시스템 상태 이미지**: 성능 모니터링 결과를 이미지로 제공
- **통계 분석**: 사용 패턴 및 성능 지표 분석

### 👑 최고관리자 권한
- **사용자 ID**: `1295232354205569075` (config.py에서 설정)
- **무제한 액세스**: 대부분의 속도 제한 무시
- **자연어 관리**: "서버 구성", "봇 이름 변경" 등

## 🚀 설치 및 실행

### 1. 의존성 설치
```bash
pip install -r requirements.txt
```

### 2. 환경 변수 설정
`.env` 파일을 생성하고 아래 내용을 채워주세요.
```env
# 필수 API 키
GEMINI_API_KEY="여기에_발급받은_Gemini_API_키를_입력하세요"
DISCORD_TOKEN="여기에_발급받은_Discord_봇_토큰을_입력하세요"

# 웹 검색 기능용 (선택적이지만 권장)
SERPAPI_KEY="여기에_SerpAPI_키를_입력하세요"
```

**API 키 발급 방법:**
- **Gemini API Key**: [Google AI Studio](https://aistudio.google.com/app/apikey)에서 발급
- **Discord Token**: [Discord Developer Portal](https://discord.com/developers/applications)에서 봇 생성 후 토큰 발급
- **SerpAPI Key**: [SerpApi](https://serpapi.com)에서 무료 계정 생성 (월 100회 검색 무료)

### 3. 봇 실행
```bash
python main.py
```

## 💬 사용법 (모든 기능이 자연어로 작동)

### 🗣️ 일반 대화 (DM 또는 멘션)
봇에게 개인 메시지(DM)를 보내거나, 서버 채널에서 `@루시아`와 같이 멘션하여 대화할 수 있습니다.
```
@루시아 안녕하세요!
루시아 뭐해?
@루시아 파이썬 프로그래밍에 대해 알려주세요
```

### 👑 관리자 전용 기능 (서버 내에서만 사용 가능)
최고관리자로 등록된 사용자는 서버 내에서 자연어 명령으로 봇과 서버를 관리할 수 있습니다.
```
루시아 서버 구성해줘
루시아 봇 이름 바꿔줘 AI 관리자
루시아 전체 채널 잠궈줘
루시아 채널 순서 변경해줘 공지사항 0
루시아 명령어 목록 보여줘
```

## 🛠️ 주요 파일 구조
- `gemini_discord_bot.py`: 메인 봇 로직 및 이벤트 핸들러
- `main.py`: 봇 실행을 위한 진입점 (Replit 환경 최적화 포함)
- `config.py`: 봇의 모든 설정 (모델, 키워드, 관리자 ID 등)
- `admin_controller.py`: 관리자 명령 처리 컨트롤러
- `intent_router.py`: 사용자 메시지에서 의도(intent) 분석
- `server_actions.py`: 실제 서버 관리 작업 수행
- `requirements.txt`: 필요한 파이썬 라이브러리 목록
- `.env`: API 키 등 민감한 정보 저장 (Git에 포함되지 않음)

**루시아와 함께 즐거운 디스코드 생활을 즐겨보세요! 🌟**